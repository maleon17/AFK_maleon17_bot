const net = require('net')

const HOST = 'donator2.gamely.pro'
const PORT = 30958

// –í—Å–µ –ø–∞–∫–µ—Ç—ã C->S –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–∏–∑ proxy_log.txt)
// –ü–µ—Ä–≤—ã–π –ø–∞–∫–µ—Ç ‚Äî handshake —Å –Ω–∞—à–∏–º —Ö–æ—Å—Ç–æ–º (–∑–∞–º–µ–Ω—è–µ–º localhost –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç)
// –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî —Ç–æ—á–Ω—ã–µ –∫–æ–ø–∏–∏

function writeVarInt(val) {
    const bytes = []
    do {
        let b = val & 0x7F
        val >>>= 7
        if (val) b |= 0x80
        bytes.push(b)
    } while (val)
    return Buffer.from(bytes)
}

function wrapPkt(hex) {
    const data = Buffer.from(hex, 'hex')
    return Buffer.concat([writeVarInt(data.length), data])
}

// Handshake (0x00): version=765, host=donator2.gamely.pro\0FML3\0, port=30958, next=2
function buildHandshake() {
    const host = 'donator2.gamely.pro\0FML3\0'
    const hostBuf = Buffer.from(host, 'utf8')
    const hostLen = writeVarInt(hostBuf.length)
    const payload = Buffer.concat([
        Buffer.from([0x00]),           // packet id
        writeVarInt(763),              // protocol version 1.20.1
        hostLen, hostBuf,             // host
        Buffer.from([0x78, 0xce]),    // port 30958
        Buffer.from([0x02])           // next state: login
    ])
    return Buffer.concat([writeVarInt(payload.length), payload])
}

// Login Start (0x00 –≤ login state): username=maleon17
function buildLoginStart() {
    const name = 'maleon17'
    const nameBuf = Buffer.from(name, 'utf8')
    const payload = Buffer.concat([
        Buffer.from([0x00]),
        writeVarInt(nameBuf.length), nameBuf,
        Buffer.from([0x00])           // no uuid
    ])
    return Buffer.concat([writeVarInt(payload.length), payload])
}

// –û—Ç–≤–µ—Ç—ã –Ω–∞ login_plugin_request (–∏–∑ –ª–æ–≥–∞, –±–µ–∑ –¥–ª–∏–Ω—ã-–ø—Ä–µ—Ñ–∏–∫—Å–∞ ‚Äî –æ–Ω —É–∂–µ –≤ RAW)
const PLUGIN_RESPONSES = {
    // tacz:handshake (#0)
    0: Buffer.from('140200010e7461637a3a68616e647368616b650101', 'hex'),
    // fml:handshake ModList (#3) ‚Äî –±–æ–ª—å—à–æ–π –ø–∞–∫–µ—Ç
    3: Buffer.from('8d190203010d666d6c3a68616e647368616b65fa18025d0673617475726e11' +
        '6578706c6f73696f6e6f7665726861756c086765636b6f6c6962097461637a' +
        '6164646f6e0c636f6e6e656374697669747909696e73616e656c69620d7861' +
        '65726f776f726c646d6170096d6f6465726e6669780d737570657262776172' +
        '6661726520066d656c6f64790c636c6f74685f636f6e666967086b6f6e6b72' +
        '657465' /* ... */ , 'hex'),
}

// –ü—Ä–æ—â–µ ‚Äî –≤–æ–∑—å–º—ë–º —Ç–æ—á–Ω—ã–µ RAW –±–∞–π—Ç—ã –∏–∑ –ª–æ–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
// RAW —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç length-prefix!
const RAW_RESPONSES = [
    // #0 –æ—Ç–≤–µ—Ç –Ω–∞ tacz
    '140200010e7461637a3a68616e647368616b650101',
    // #1 tacztweaks ‚Äî –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º)
    null,
    // #2 fml ServerHello ‚Äî –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞
    null,
    // #3 fml ModList
    '8d190203010d666d6c3a68616e647368616b65fa18025d0673617475726e116578706c6f73696f6e6f7665726861756c086765636b6f6c6962097461637a6164646f6e0c636f6e6e656374697669747909696e73616e656c69620d786165726f776f726c646d6170096d6f6465726e6669780d73757065726277617266617265066d656c6f64790c636c6f74685f636f6e666967086b6f6e6b7265746509656d6265646469756d08727562696469756d06636f727073650e6461666661735f617273656e616c046d6373700e6661726d65727364656c696768740977726264726f6e6573076373676f626f780a6c696768747370656564066f63756c757310786165726f6d696e696d617066616972196c6567656e64617279737572766976616c6f7665726861756c06637572696f730a637573746f6d6e70637309776f726c64656469740c6172636869746563747572790e6169696d70726f76656d656e747308637570626f6172640a7472616e736974696f6e0a6974656d7068797369630a656e68616e636564616913646f6f6d736461795f6465636f726174696f6e0c706c61796572726576697665086d61787374756666046b697769057268696e6f066b7562656a7308666173746c6f6164066a73636f6e660c7061727469636c657261696e047461637a0e776172626f726e72656e657765640a7461637a747765616b73077472656e6465720a61736876656869636c650f7061737361626c65666f6c69616765116c696768746d616e7363757272656e6379076261646d6f627309626c75657072696e74037676700d6d656d6f72796c65616b66697805666f7267650e636170747572656f667a6f6e6573096d696e6563726166740674616b6b69740b726174696f6e63726166741e636170735f6177696d5f746163746963616c5f676561725f7265776f726b0a776f6f6c5f62616e647311766f69646c6573736672616d65776f726b0f64697374616e74686f72697a6f6e7309766f696365636861740d766f696365636861745f6170690c6d6978696e737175617265640c6372656174697665636f726511737572766976616c5f696e7374696e63740c77616c6b696574616c6b69650b706572736f6e616c6974790a6c72746163746963616c0e6b6f746c696e666f72666f72676508666c79776865656c06706f6e646572066372656174650a6372656174656465636f0c6672616d6564626c6f636b730a6c657869636f6e6669670b656e646c657373616d6d6f0f736f6c646965727364656c6967687407706172636f6f6c0f6368616d6265725f636c61726974790e7375707072657373696f6e6d6f640d656e7469747963756c6c696e670d6672616374757265706f696e74137461637a7867756e6c69676874736164646f6e0966616e63796d656e750f696d6d6564696174656c79666173740b66657272697465636f7265197965745f616e6f746865725f636f6e6669675f6c69625f76330f656d6265646469756d5f65787472610762617269746f650b73696d706c65726164696f0a636c69636b327069636b4c0d776f726c64656469743a63756901310b706f6e6465723a6d61696e013110766f696365636861743a73656372657419414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92931864697374616e745f686f72697a6f6e733a6d65737361676501310f706172636f6f6c3a6d65737361676507332e342e332e3019696e73616e656c69623a6e6574776f726b5f6368616e6e656c013216766f696365636861743a6372656174655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293146d696e6563726166743a756e726567697374657204464d4c3311786165726f6d696e696d61703a6d61696e03312e3010766f696365636861743a73746174657319414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92931b7461637a7867756e6c69676874736164646f6e3a6e6574776f726b03312e3013776172626f726e72656e657765643a6d61696e01310e7461637a3a68616e647368616b6505312e302e3416766f696365636861743a7570646174655f737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293137461637a6164646f6e3a73796e635f6461746103312e3023766f69646c6573736672616d65776f726b3a766f69646c6573736672616d65776f726b013113766f696365636861743a6164645f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930f6974656d7068797369633a6d61696e013112666f7267653a746965725f736f7274696e6703312e3023737572766976616c5f696e7374696e63743a737572766976616c5f696e7374696e637401311373696d706c65726164696f3a6368616e6e656c013011706c617965727265766976653a6d61696e013108666d6c3a706c617904464d4c33116372656174697665636f72653a6d61696e0131126c72746163746963616c3a6e6574776f726b05302e332e300f766f696365636861743a737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f929319766f696365636861743a72656d6f76655f63617465676f727919414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293196d6f6465726e6669783a696e6772656469656e745f73796e6301310f61736876656869636c653a6d61696e03312e3016766f696365636861743a6164645f63617465676f727919414c4c4f5756414e494c4c4120f09f9293f09f9293f09f929312776f726c64656469743a696e7465726e616c0131077676703a76767001310d626c75657072696e743a6e65740342503112786165726f776f726c646d61703a6d61696e03312e3016766f696365636861743a72656d6f76655f737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293166578706c6f73696f6e6f7665726861756c3a6d61696e0131126d696e6563726166743a726567697374657204464d4c331f736f6c646965727364656c696768743a736f6c646965727364656c6967687401310b6372656174653a6d61696e01331b737570657262776172666172653a7375706572627761726661726501310d6765636b6f6c69623a6d61696e01310e77726264726f6e65733a6d61696e0131147461637a747765616b733a68616e647368616b6504322e3133096b6977693a6d61696e01310e636f727073653a64656661756c7405312e302e30146172636869746563747572793a6e6574776f726b013115766f696365636861743a6c656176655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293096d6373703a6d61696e013115776f6f6c5f62616e64733a776f6f6c5f62616e64730131126672616374757265706f696e743a6d61696e01310f706572736f6e616c6974793a6e6574013113636170747572656f667a6f6e65733a6d61696e0131137375707072657373696f6e6d6f643a6d61696e013113766f696365636861743a7365745f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930e66616e63796d656e753a706c6179013116766f696365636861743a6a6f696e65645f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930e6d6f6465726e6669783a6d61696e01310b637572696f733a6d61696e0131117061727469636c657261696e3a6d61696e0131196c696768746d616e7363757272656e63793a6e6574776f726b01311e6c6567656e64617279737572766976616c6f7665726861756c3a6d61696e0131127461637a747765616b733a6368616e6e656c04322e31330f636c69636b327069636b3a6d61696e013110666d6c3a6c6f67696e7772617070657204464d4c33116672616d6564626c6f636b733a6d61696e013327646f6f6d736461795f6465636f726174696f6e3a646f6f6d736461795f6465636f726174696f6e01310d74616b6b69743a74616b6b6974013117726174696f6e63726166743a726174696f6e6372616674013112637573746f6d6e7063733a7061636b65747305434e50435318766f696365636861743a726571756573745f73656372657419414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92933d636170735f6177696d5f746163746963616c5f676561725f7265776f726b3a636170735f6177696d5f746163746963616c5f676561725f7265776f726b01310d666d6c3a68616e647368616b6504464d4c330f6373676f626f783a6e6574776f726b03312e3016766f696365636861743a72656d6f76655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930b666f7267653a73706c697403312e310c7461637a3a6e6574776f726b05312e302e3400',
]

// ACK –ø–∞–∫–µ—Ç (–¥–ª—è –≤—Å–µ—Ö fml:handshake –∫—Ä–æ–º–µ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö)
const ACK_HEX = '130204010d666d6c3a68616e647368616b650163'

function readVarInt(buf, off) {
    let val = 0, len = 0, b
    do {
        if (off + len >= buf.length) return null
        b = buf[off + len]
        val |= (b & 0x7F) << (len * 7)
        len++
    } while (b & 0x80)
    return { value: val, length: len }
}

const sock = net.createConnection(PORT, HOST, () => {
    console.log('[+] Connected!')

    // 1. Handshake
    sock.write(buildHandshake())
    console.log('[->] Handshake')

    // 2. Login Start
    sock.write(buildLoginStart())
    console.log('[->] Login Start')
})

let buf = Buffer.alloc(0)
let requestCount = 0

sock.on('data', chunk => {
    buf = Buffer.concat([buf, chunk])

    while (buf.length > 0) {
        const lenInfo = readVarInt(buf, 0)
        if (!lenInfo) break
        const total = lenInfo.length + lenInfo.value
        if (buf.length < total) break

        const pkt = buf.slice(lenInfo.length, total)
        buf = buf.slice(total)

        const idInfo = readVarInt(pkt, 0)
        if (!idInfo) continue

        // Login Success = 0x02
        if (idInfo.value === 0x02) {
            console.log('\n‚úÖ LOGIN SUCCESS!')
            // –¢—É—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AFK –ª–æ–≥–∏–∫—É
            startAFK()
            return
        }

        // Disconnect = 0x00 in login state
        if (idInfo.value === 0x00 && pkt.length > 5) {
            console.log('\n‚ùå DISCONNECT:', pkt.slice(idInfo.length).toString('utf8').substring(0, 200))
            sock.destroy()
            return
        }

        console.log(`[PKT] id=0x${idInfo.value.toString(16)} len=${pkt.length} hex=${pkt.slice(0,16).toString('hex')}`)
        
        // Login Plugin Request = 0x04
        if (idInfo.value === 0x04) {
            let o = idInfo.length
            const msgIdInfo = readVarInt(pkt, o)
            if (!msgIdInfo) continue
            const msgId = msgIdInfo.value
            o += msgIdInfo.length

            // –ß–∏—Ç–∞–µ–º channel
            const chLenInfo = readVarInt(pkt, o)
            const ch = pkt.slice(o + chLenInfo.length, o + chLenInfo.length + chLenInfo.value).toString('utf8')

            console.log(`[<-] Plugin Request #${msgId}: ${ch}`)

            // –õ–æ–≥–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ msgId
            if (msgId === 0) {
                // tacz:handshake
                sock.write(Buffer.from('140200010e7461637a3a68616e647368616b650101', 'hex'))
                console.log(`[->] tacz reply`)
            } else if (msgId === 1 || msgId === 2) {
                // tacztweaks –∏ fml ServerHello ‚Äî –Ω–µ –æ—Ç–≤–µ—á–∞–µ–º
                console.log(`[->] skip`)
            } else if (msgId === 3) {
                // fml ModList
                sock.write(Buffer.from('8d190203010d666d6c3a68616e647368616b65fa18025d0673617475726e116578706c6f73696f6e6f7665726861756c086765636b6f6c6962097461637a6164646f6e0c636f6e6e656374697669747909696e73616e656c69620d786165726f776f726c646d6170096d6f6465726e6669780d73757065726277617266617265066d656c6f64790c636c6f74685f636f6e666967086b6f6e6b7265746509656d6265646469756d08727562696469756d06636f727073650e6461666661735f617273656e616c046d6373700e6661726d65727364656c696768740977726264726f6e6573076373676f626f780a6c696768747370656564066f63756c757310786165726f6d696e696d617066616972196c6567656e64617279737572766976616c6f7665726861756c06637572696f730a637573746f6d6e70637309776f726c64656469740c6172636869746563747572790e6169696d70726f76656d656e747308637570626f6172640a7472616e736974696f6e0a6974656d7068797369630a656e68616e636564616913646f6f6d736461795f6465636f726174696f6e0c706c61796572726576697665086d61787374756666046b697769057268696e6f066b7562656a7308666173746c6f6164066a73636f6e660c7061727469636c657261696e047461637a0e776172626f726e72656e657765640a7461637a747765616b73077472656e6465720a61736876656869636c650f7061737361626c65666f6c69616765116c696768746d616e7363757272656e6379076261646d6f627309626c75657072696e74037676700d6d656d6f72796c65616b66697805666f7267650e636170747572656f667a6f6e6573096d696e6563726166740674616b6b69740b726174696f6e63726166741e636170735f6177696d5f746163746963616c5f676561725f7265776f726b0a776f6f6c5f62616e647311766f69646c6573736672616d65776f726b0f64697374616e74686f72697a6f6e7309766f696365636861740d766f696365636861745f6170690c6d6978696e737175617265640c6372656174697665636f726511737572766976616c5f696e7374696e63740c77616c6b696574616c6b69650b706572736f6e616c6974790a6c72746163746963616c0e6b6f746c696e666f72666f72676508666c79776865656c06706f6e646572066372656174650a6372656174656465636f0c6672616d6564626c6f636b730a6c657869636f6e6669670b656e646c657373616d6d6f0f736f6c646965727364656c6967687407706172636f6f6c0f6368616d6265725f636c61726974790e7375707072657373696f6e6d6f640d656e7469747963756c6c696e670d6672616374757265706f696e74137461637a7867756e6c69676874736164646f6e0966616e63796d656e750f696d6d6564696174656c79666173740b66657272697465636f7265197965745f616e6f746865725f636f6e6669675f6c69625f76330f656d6265646469756d5f65787472610762617269746f650b73696d706c65726164696f0a636c69636b327069636b4c0d776f726c64656469743a63756901310b706f6e6465723a6d61696e013110766f696365636861743a73656372657419414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92931864697374616e745f686f72697a6f6e733a6d65737361676501310f706172636f6f6c3a6d65737361676507332e342e332e3019696e73616e656c69623a6e6574776f726b5f6368616e6e656c013216766f696365636861743a6372656174655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293146d696e6563726166743a756e726567697374657204464d4c3311786165726f6d696e696d61703a6d61696e03312e3010766f696365636861743a73746174657319414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92931b7461637a7867756e6c69676874736164646f6e3a6e6574776f726b03312e3013776172626f726e72656e657765643a6d61696e01310e7461637a3a68616e647368616b6505312e302e3416766f696365636861743a7570646174655f737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293137461637a6164646f6e3a73796e635f6461746103312e3023766f69646c6573736672616d65776f726b3a766f69646c6573736672616d65776f726b013113766f696365636861743a6164645f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930f6974656d7068797369633a6d61696e013112666f7267653a746965725f736f7274696e6703312e3023737572766976616c5f696e7374696e63743a737572766976616c5f696e7374696e637401311373696d706c65726164696f3a6368616e6e656c013011706c617965727265766976653a6d61696e013108666d6c3a706c617904464d4c33116372656174697665636f72653a6d61696e0131126c72746163746963616c3a6e6574776f726b05302e332e300f766f696365636861743a737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f929319766f696365636861743a72656d6f76655f63617465676f727919414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293196d6f6465726e6669783a696e6772656469656e745f73796e6301310f61736876656869636c653a6d61696e03312e3016766f696365636861743a6164645f63617465676f727919414c4c4f5756414e494c4c4120f09f9293f09f9293f09f929312776f726c64656469743a696e7465726e616c0131077676703a76767001310d626c75657072696e743a6e65740342503112786165726f776f726c646d61703a6d61696e03312e3016766f696365636861743a72656d6f76655f737461746519414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293166578706c6f73696f6e6f7665726861756c3a6d61696e0131126d696e6563726166743a726567697374657204464d4c331f736f6c646965727364656c696768743a736f6c646965727364656c6967687401310b6372656174653a6d61696e01331b737570657262776172666172653a7375706572627761726661726501310d6765636b6f6c69623a6d61696e01310e77726264726f6e65733a6d61696e0131147461637a747765616b733a68616e647368616b6504322e3133096b6977693a6d61696e01310e636f727073653a64656661756c7405312e302e30146172636869746563747572793a6e6574776f726b013115766f696365636861743a6c656176655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f9293096d6373703a6d61696e013115776f6f6c5f62616e64733a776f6f6c5f62616e64730131126672616374757265706f696e743a6d61696e01310f706572736f6e616c6974793a6e6574013113636170747572656f667a6f6e65733a6d61696e0131137375707072657373696f6e6d6f643a6d61696e013113766f696365636861743a7365745f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930e66616e63796d656e753a706c6179013116766f696365636861743a6a6f696e65645f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930e6d6f6465726e6669783a6d61696e01310b637572696f733a6d61696e0131117061727469636c657261696e3a6d61696e0131196c696768746d616e7363757272656e63793a6e6574776f726b01311e6c6567656e64617279737572766976616c6f7665726861756c3a6d61696e0131127461637a747765616b733a6368616e6e656c04322e31330f636c69636b327069636b3a6d61696e013110666d6c3a6c6f67696e7772617070657204464d4c33116672616d6564626c6f636b733a6d61696e013327646f6f6d736461795f6465636f726174696f6e3a646f6f6d736461795f6465636f726174696f6e01310d74616b6b69743a74616b6b6974013117726174696f6e63726166743a726174696f6e6372616674013112637573746f6d6e7063733a7061636b65747305434e50435318766f696365636861743a726571756573745f73656372657419414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92933d636170735f6177696d5f746163746963616c5f676561725f7265776f726b3a636170735f6177696d5f746163746963616c5f676561725f7265776f726b01310d666d6c3a68616e647368616b6504464d4c330f6373676f626f783a6e6574776f726b03312e3016766f696365636861743a72656d6f76655f67726f757019414c4c4f5756414e494c4c4120f09f9293f09f9293f09f92930b666f7267653a73706c697403312e310c7461637a3a6e6574776f726b05312e302e3400', 'hex'))
                console.log(`[->] ModList`)
            } else {
                // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî ACK —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º msgId
                // –ë–µ—Ä—ë–º —à–∞–±–ª–æ–Ω ACK –∏ –∑–∞–º–µ–Ω—è–µ–º messageId
                // 13 02 [msgId varint] 01 0d 666d6c3a68616e647368616b65 0163
                const msgIdBuf = writeVarInt(msgId)
                const ackPayload = Buffer.concat([
                    Buffer.from([0x02]),         // packet id
                    msgIdBuf,                    // message id
                    Buffer.from([0x01]),         // success
                    Buffer.from([0x0d]),         // channel name length (13)
                    Buffer.from('666d6c3a68616e647368616b65', 'hex'), // "fml:handshake"
                    Buffer.from([0x01, 0x63])   // ACK payload
                ])
                sock.write(Buffer.concat([writeVarInt(ackPayload.length), ackPayload]))
                console.log(`[->] ACK #${msgId}`)
            }
        }
    }
})

function startAFK() {
    console.log('[AFK] –†–µ–∂–∏–º AFK –≤–∫–ª—é—á—ë–Ω')
    // –ü–∏–Ω–≥—É–µ–º —Å–µ—Ä–≤–µ—Ä –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (keep-alive)
    // –í play state keep-alive –ø–∞–∫–µ—Ç = 0x12 + id
    setInterval(() => {
        // –°–µ—Ä–≤–µ—Ä —Å–∞–º —à–ª—ë—Ç keep-alive, –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–≤–µ—á–∞—Ç—å
        // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º
        console.log('[AFK] alive...')
    }, 10000)
}

sock.on('error', e => {
    console.log('‚ùå ERROR:', e.message)
})

sock.on('close', () => {
    console.log('üîå DISCONNECTED')
    process.exit()
})
